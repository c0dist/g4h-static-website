<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://www.facebook.com/2008/fbml" dir="ltr" lang="en" id="vbulletin_html">

<!-- Mirrored from garage4hackers.com/printthread.php?t=6243&pp=10&page=1 by HTTraQt Website Copier/1.x [Karbofos 2012-2017] Sun, 22 Mar 2020 12:30:25 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=ISO-8859-1" /><!-- /Added by HTTrack -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
	<base  /><!--[if IE]></base><![endif]-->
	<meta name="generator" content="vBulletin 4.2.1" />

	
	<link rel="stylesheet" type="text/css" href="cssddc9.css?styleid=1&amp;langid=1&amp;d=1410988287&amp;td=ltr&amp;sheet=bbcode.css,popupmenu.css,printthread.css,vbulletin.css,vbulletin-chrome.css" />
	



	<title> Architecture for fuzzing lab?</title>
	<link rel="stylesheet" type="text/css" href="css657d.css?styleid=1&amp;langid=1&amp;d=1410988287&amp;td=ltr&amp;sheet=additional.css" />

</head>
<body>

<div class="above_body">
<div id="header" class="floatcontainer">
<div><a name="top" href="forum.html" class="logo-image"><img src="images/misc/vbulletin4_logo.html" alt="Garage4hackers Forum" /></a></div>
</div>
</div>
<div class="body_wrapper">
<div id="pagetitle">
	<h1><a href="showthreaddeb2.html?t=6243">Architecture for fuzzing lab?</a></h1>
	<p class="description">Printable View</p>
</div>



<ul id="postlist">
	<li class="postbit blockbody" id="post_1">
	<div class="header">
		<div class="datetime">05-02-2015, 01:29 AM</div>
		<span class="username">b0nd</span>
	</div>
	
	
		<div class="title">Architecture for fuzzing lab?</div>
	
	<div class="content">
		<blockquote class="restore">Hi,<br />
<br />
Beginners could get  confused with what kind of architecture a fuzzing lab should comprise of? <br />
Basically, there shall be something to request and something to respond. So in most of the cases it's a sever-client architecture. <br />
<br />
Server: A node which would be hosting or generating fuzz files<br />
Client : A node which would access/load those hosted/generated files in an application to check if that crashes.<br />
<br />
Application could be anything that interests a researcher and accordingly fuzz files needs to be hosted/generated on the fly on server. Few likes generating fuzz files of their interest and host on server. Contrary, few likes generating them on the fly. Today, focus of this write-up is bit on 'generating &amp; hosting' files.<br />
<br />
Disclaimer: I am no expert on this; just sharing what I've observed and understood so far.<br />
<br />
<font size="4"><b><br />
<font size="3">Generating &amp; Hosting Files on Server:</font><br />
</b></font><br />
On a smaller scale, a researcher could have just a single machine hosting his/her server (LAMP/WAMP) and client node. That's fine to test out fuzzer code (write you own from scratch) and some basic tests. But shall improve upon hardware gradually, if on serious note.<br />
<br />
My suggestions:<br />
1. <b>Use Linux</b>: Requirement could be there to generate millions of test cases (fuzz cases). Unfortunately, file generations starts crawling on windows once it has generated more than a million files in a single directory. In my test, same code started crawling after generating 1.1M files on windows but worked perfectly on linux even after generating 2.4M files (I did not go beyond that).<br />
<br />
2. <b>If using LAMP</b>, apache would need to be customized to withhold your test DDoS attack on it. Fuzzing goes in spikes. Most of the test cases wouldn't bother the application anyway. Few could offer minor glitches and few could simply hang the application. Assuming your lab has 10 client nodes &amp; 1 server. When applications on those 10 nodes are processing fuzz cases without gliches, the Apache is serving quite many requests concurrently! and there starts the DDoS on it. With 10 nodes, it just wouldn't be 10 requests/second. Based on researchers code, it could grow multifolds.<br />
<br />
3. <b>Use mpm_event</b>: With LAMP, the MPM (multi processing module) that comes default is mpm_prefork. It has to be replaced to meet fuzz lab requirements. mpm_event is the latest stable member and is highly recommended for concurrence.<br />
My tests has shown, mpm_prefork failed serving more than 7 client nodes but mpm_event served 24 nodes perfectly (not sure what is its limit)<br />
<br />
Following are few links which could help setup such a lab:<br />
<a href="../external.html?link=https://www.digitalocean.com/community/tutorials/how-to-install-linux-apache-mysql-php-lamp-stack-on-ubuntu" target="_blank">https://www.digitalocean.com/communi...tack-on-ubuntu</a><br />
<a href="../external.html?link=https://www.digitalocean.com/community/tutorials/how-to-install-and-secure-phpmyadmin-on-ubuntu-12-04" target="_blank">https://www.digitalocean.com/communi...n-ubuntu-12-04</a><br />
<a href="../external.html?link=http://jaswsinc.com/ubuntu-lamp-apache-mpm-event-fastcgi-php5-fpm/" target="_blank">http://jaswsinc.com/ubuntu-lamp-apac...tcgi-php5-fpm/</a><br />
<a href="../external.html?link=http://askubuntu.com/questions/453377/how-to-enable-event-mpm-apache-2-4-on-ubuntu-14-04-with-thread-safe-php" target="_blank">http://askubuntu.com/questions/45337...hread-safe-php</a><br />
<a href="../external.html?link=http://askubuntu.com/questions/524770/apache-enable-worker-mpm" target="_blank">http://askubuntu.com/questions/52477...ble-worker-mpm</a><br />
<a href="../external.html?link=http://serverfault.com/questions/383526/how-do-i-select-which-apache-mpm-to-use" target="_blank">http://serverfault.com/questions/383...che-mpm-to-use</a><br />
<a href="../external.html?link=http://www.vps.net/blog/2013/04/08/apache-mpms-prefork-worker-and-event/" target="_blank">http://www.vps.net/blog/2013/04/08/a...ker-and-event/</a><br />
<br />
.... sharing is caring :)<br />
<br />
Cheers!<br />
<br />
PS: It would be appreciable if people share their experiences as well.</blockquote>
	</div>
</li><li class="postbit blockbody" id="post_2">
	<div class="header">
		<div class="datetime">06-20-2016, 06:24 AM</div>
		<span class="username">b0nd</span>
	</div>
	
	
	<div class="content">
		<blockquote class="restore">Following setting for mpm_event works flawless for me:<br />
<br />
<div class="bbcode_container">
	<div class="bbcode_description">Quote:</div>
	<div class="bbcode_quote printable">
		<hr />
		
			&lt;IfModule mpm_event_module&gt;<br />
Timeout 300<br />
StartServers 2<br />
ThreadLimit 64<br />
ThreadsPerChild 64<br />
MaxConnectionsPerChild 10000<br />
<br />
MinSpareThreads 20<br />
MaxSpareThreads 85<br />
ServerLimit 8<br />
MaxRequestWorkers 512<br />
<br />
KeepAlive On<br />
MaxKeepAliverequests 50<br />
KeepAliveTimeout 4<br />
<br />
&lt;/IfModule&gt;
			
		<hr />
	</div>
</div>Reportedly (<a href="../external.html?link=http://flo.livezon.com/2015/08/install-apache-event-mpm-fastcgi-php5-fpm-on-ubuntu-14-04/" target="_blank">http://flo.livezon.com/2015/08/insta...-ubuntu-14-04/</a>) it shall be able to handle 512 requests per second.</blockquote>
	</div>
</li>
</ul>


</div>
<div class="below_body">
<div id="footer_time" class="footer_time">All times are GMT +5.5. The time now is <span class="time">04:07 PM</span>.</div>

<div id="footer_copyright" class="footer_copyright">
	<!-- Do not remove this copyright notice -->
	Powered by <a href="../external.html?link=https://www.vbulletin.com/" id="vbulletinlink">vBulletin&reg;</a> Version 4.2.1 <br />Copyright &copy; 2020 vBulletin Solutions, Inc. All rights reserved. 
	<!-- Do not remove this copyright notice -->	
</div>
<div id="footer_morecopyright" class="footer_morecopyright">
	<!-- Do not remove cronimage or your scheduled tasks will cease to function -->
	
	<!-- Do not remove cronimage or your scheduled tasks will cease to function -->
	Copyright 2010 - 2017, Garage4Hackers
</div>
 
</div>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try{
var pageTracker = _gat._getTracker('UA-17311051-3');
pageTracker._trackPageview();
} catch(err) {}</script>
</body>

<!-- Mirrored from garage4hackers.com/printthread.php?t=6243&pp=10&page=1 by HTTraQt Website Copier/1.x [Karbofos 2012-2017] Sun, 22 Mar 2020 12:30:25 GMT -->
</html>